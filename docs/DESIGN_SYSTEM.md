# Ash Trail Design System**Comprehensive UI/UX Enhancement & Standardization**## OverviewThe Ash Trail design system provides comprehensive UI/UX enhancements focusing on accessibility, responsiveness, and widget standardization. All utilities and constants are centralized in `lib/utils/`.---## üìÅ Core Files| File | Purpose | Lines ||------|---------|-------|| [`design_constants.dart`](../lib/utils/design_constants.dart) | Spacing, sizing, breakpoints, typography constants | 440 || [`a11y_utils.dart`](../lib/utils/a11y_utils.dart) | Accessibility helpers: semantic labels, touch targets | 377 || [`responsive_layout.dart`](../lib/utils/responsive_layout.dart) | Responsive widgets and layout builders | 563 || [`widget_standardization.dart`](../lib/utils/widget_standardization.dart) | Centering, spacing, padding standardization | 275 |---## üìè Spacing System### Spacing Enum```dartenum Spacing {  xs(4),   // Extra small  sm(8),   // Small  md(12),  // Medium  lg(16),  // Large    xl(24),  // Extra large  xxl(32), // 2x Extra large  xxxl(48);// 3x Extra large}// Usage:SizedBox(height: Spacing.md.value) // 12px gap```### Padding Constants```dart// Uniform paddingPaddings.sm   // EdgeInsets.all(8)Paddings.lg   // EdgeInsets.all(16)Paddings.xl   // EdgeInsets.all(24)// Directional paddingPaddings.horizontalLg  // EdgeInsets.symmetric(horizontal: 16)Paddings.verticalMd    // EdgeInsets.symmetric(vertical: 12)```---## üì± Responsive Design### Breakpoints```dartclass Breakpoints {  static const double mobileMaxWidth = 599;       // < 600dp  static const double tabletBreakpoint = 600;     // 600-1199dp  static const double desktopBreakpoint = 1200;   // >= 1200dp}```### Device Form Factors```dartenum DeviceFormFactor {  mobile,   // < 600dp  tablet,   // 600-1199dp    desktop;  // >= 1200dp    static DeviceFormFactor from(BuildContext context);}```### Responsive Widgets#### ResponsiveLayout```dartResponsiveLayout(  mobile: MobileView(),  tablet: TabletView(),    // Optional, falls back to mobile  desktop: DesktopView(),  // Optional, falls back to tablet)```#### ResponsiveBuilder```dartResponsiveBuilder(  builder: (context, formFactor) {    return switch (formFactor) {      DeviceFormFactor.mobile => CompactUI(),      DeviceFormFactor.tablet => MediumUI(),      DeviceFormFactor.desktop => ExpandedUI(),    };  },)```#### ResponsivePadding```dartResponsivePadding(  mobilePadding: 16,  tabletPadding: 24,  desktopPadding: 32,  child: Content(),)```---## ‚ôø Accessibility (A11y)### Touch Target Sizing```dartclass A11yConstants {  static const double minimumTouchSize = 48;     // WCAG minimum  static const double focusIndicatorWidth = 2;   // Focus border}```### Semantic Labels```dartclass SemanticLabelBuilder {  static String button(String label);  // ‚Üí "Button: Save"    static String field(String label);  // ‚Üí "Field: Email"    static String toggle(String label, {bool enabled = false});  // ‚Üí "Interactive: Notifications, enabled"    static String sliderValue(String label, double value, {String? unit});  // ‚Üí "Field: Volume: 75.0%"}```### Semantic Widgets```dart// Icon with semantic labelSemanticIcon(  icon: Icons.delete,  semanticLabel: 'Delete item',)// Minimum touch target (48x48)MinimumTouchTarget(  onTap: () => delete(),  child: Icon(Icons.close, size: 20),)// Accessible buttonSemanticButton(  label: 'Save changes',  onPressed: () => save(),  child: Text('Save'),)```### Color Contrast (WCAG)```dartclass ColorContrastValidator {  static double contrastRatio(Color fg, Color bg);  static bool meetsWCAGAA(Color fg, Color bg);   // 4.5:1  static bool meetsWCAGAAA(Color fg, Color bg);  // 7:1}// Usage:if (ColorContrastValidator.meetsWCAGAA(textColor, bgColor)) {  print('‚úÖ Readable');}```---## üé® Design Tokens### Icon Sizing```dartenum IconSize {  xs(16), sm(20), md(24), lg(32), xl(48), xxl(64);}Icon(Icons.star, size: IconSize.lg.value)```### Border Radius```dartenum BorderRadiusSize {  sm(4), md(8), lg(12), xl(16), xxl(24);}// Quick accessorsBorderRadii.md  // BorderRadius.circular(8)```### Elevation```dartenum ElevationLevel {  none(0), low(2), medium(4), high(8), veryHigh(12);}Card(elevation: ElevationLevel.medium.value)```### Typography```dartclass FontSizeScale {  static const double bodySmall = 12;  static const double bodyMedium = 14;  static const double bodyLarge = 16;    static const double headlineSmall = 20;  static const double headlineMedium = 28;  static const double headlineLarge = 32;}```---## üì¶ Widget Standardization### Spacing Utilities```dart// Vertical gapsGap(Spacing.md)           // 12px vertical spaceResponsiveGap(  mobile: 8,  tablet: 12,  desktop: 16,)// Horizontal gapsHorizontalGap(Spacing.lg) // 16px horizontal space```### Centering```dartCenteredWidget(  maxWidth: 600,  child: Content(),)CenteredInAvailableSpace(  child: Widget(),)```### Responsive Sizing```dartclass ResponsiveSize {  // Get value based on screen size  static double responsive({    required BuildContext context,    required double mobile,    double? tablet,    double? desktop,  });    // Get responsive font size  static double fontSize({    required BuildContext context,    required double base,    double scaleTablet = 1.0,    double scaleDesktop = 1.0,  });}```---## üß™ Testing### Test Coverage**Current Status: 70/84 tests passing (83%)**- ‚úÖ **Accessibility tests** ([`test/accessibility/accessibility_test.dart`](../test/accessibility/accessibility_test.dart))  - Semantic label builders  - Touch target sizing  - Color contrast validation  - WCAG compliance- ‚úÖ **Responsive design tests** ([`test/responsive/responsive_design_test.dart`](../test/responsive/responsive_design_test.dart))  - Breakpoint detection  - Form factor identification    - Layout rendering  - Orientation handling### Test Utilities```darttestWidgets('Responsive layout adapts', (tester) async {  await tester.binding.setSurfaceSize(const Size(400, 800));  addTearDown(() => tester.binding.setSurfaceSize(null));    await tester.pumpWidget(    MaterialApp(      home: ResponsiveLayout(        mobile: Text('Mobile'),        tablet: Text('Tablet'),      ),    ),  );    expect(find.text('Mobile'), findsOneWidget);});```---## üöÄ Migration Guide### Before (Hardcoded)```dartContainer(  padding: EdgeInsets.all(16),  child: Column(    children: [      SizedBox(height: 24),      Text('Title', style: TextStyle(fontSize: 20)),    ],  ),)```### After (Design System)```dartContainer(  padding: Paddings.lg,  child: Column(    children: [      Gap(Spacing.xl),      Text(        'Title',        style: TextStyle(fontSize: FontSizeScale.headlineSmall),      ),    ],  ),)```### With Responsive Support```dartResponsivePadding(  mobilePadding: 16,  tabletPadding: 24,  desktopPadding: 32,  child: Column(    children: [      ResponsiveGap(mobile: 16, tablet: 24),      Text(        'Title',        style: TextStyle(          fontSize: ResponsiveSize.fontSize(            context: context,            base: FontSizeScale.headlineSmall,            scaleTablet: 1.2,          ),        ),      ),    ],  ),)```---## ‚úÖ Best Practices### DO- ‚úÖ Use `Spacing` enum for consistent gaps- ‚úÖ Use `Paddings` constants for padding- ‚úÖ Add semantic labels to interactive widgets- ‚úÖ Ensure touch targets ‚â• 48x48 pixels- ‚úÖ Test color contrast with `ColorContrastValidator`- ‚úÖ Use responsive layouts for tablet/desktop### DON'T- ‚ùå Hardcode spacing: `EdgeInsets.all(16)`- ‚ùå Use arbitrary font sizes- ‚ùå Create small touch targets without `MinimumTouchTarget`- ‚ùå Forget semantic labels on icons- ‚ùå Assume mobile-only layouts- ‚ùå Use low-contrast colors without validation---## üìö Common Screen Sizes```dartclass ScreenSizes {  // Mobile  static const smallPhone = Size(360, 640);   // iPhone SE  static const mediumPhone = Size(390, 844);  // iPhone 14  static const largePhone = Size(412, 915);   // Pixel 6    // Tablet  static const mediumTablet = Size(768, 1024); // iPad  static const largeTablet = Size(1024, 1366); // iPad Pro    // Desktop  static const smallDesktop = Size(1200, 800);  static const mediumDesktop = Size(1440, 900);  static const largeDesktop = Size(1920, 1080);}```---## üéØ Implementation Status### ‚úÖ Completed1. **Design Constants** - Spacing, sizing, breakpoints, typography2. **Accessibility Layer** - Semantic widgets, touch targets, contrast validation3. **Responsive System** - Layout builders, responsive sizing helpers4. **Widget Standardization** - Centering, spacing, padding utilities5. **Test Suite** - 70 passing tests covering a11y and responsive design6. **Documentation** - Comprehensive design system guide### üöß Next Steps1. Apply design system to existing screens:   - [home_screen.dart](../lib/screens/home_screen.dart)   - [analytics_screen.dart](../lib/screens/analytics_screen.dart)   - [history_screen.dart](../lib/screens/history_screen.dart)   - [logging_screen.dart](../lib/screens/logging_screen.dart)2. Refactor widgets to use design constants:   - [home_quick_log_widget.dart](../lib/widgets/home_quick_log_widget.dart)   - [analytics_charts_widget.dart](../lib/widgets/analytics_charts_widget.dart)   - Chart widgets in [lib/widgets/charts/](../lib/widgets/charts/)3. Add semantic labels to all interactive elements4. Implement responsive layouts for tablet/desktop views---## üìñ Resources- [Material Design 3](https://m3.material.io/)- [Flutter Accessibility](https://docs.flutter.dev/development/accessibility-and-localization/accessibility)- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)---**Version 1.0.0** | *Last updated: January 13, 2026*