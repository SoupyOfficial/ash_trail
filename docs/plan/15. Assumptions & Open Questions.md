## 15. Assumptions & Open Questions

### 15.1 Overview

This section documents explicit assumptions made during the design and implementation of AshTrail, along with unresolved questions that may affect future architecture, scalability, or feature direction.

These assumptions are intentionally documented to:
- Clarify current design tradeoffs
- Prevent accidental violations during future development
- Provide context for refactors or extensions

---

### 15.2 Assumptions

#### 15.2.1 Single Primary User

**Description**
- AshTrail is currently designed with the expectation that a single human user operates the app.
- Multiple accounts exist to represent different tracking contexts (e.g., substances, profiles), not different people.

**Implications**
- No concurrency control between users
- No permission or role model
- Local state is authoritative per device
- Sync conflicts are resolved under the assumption of a single actor

**Constraints**
- Account switching is local and deterministic
- All logs are assumed to originate from the same person
- UX does not account for collaborative or shared editing

**Assumptions**
- The user will not attempt to use AshTrail collaboratively
- Multi-device usage is limited to the same individual

---

#### 15.2.2 Eventual Consistency Is Acceptable

**Description**
- AshTrail tolerates temporary divergence between local and remote state.
- Local-first behavior is prioritized over immediate global correctness.

**Implications**
- Logs may appear locally before syncing remotely
- Aggregations may lag behind recent writes
- Temporary inconsistencies are expected during offline usage

**Constraints**
- No hard real-time guarantees
- Sync failures must not block local usage
- Conflict resolution favors latest-known or locally-authoritative data

**Assumptions**
- Short-term inconsistency does not harm the core use case
- Users value reliability and offline access over strict immediacy

---

### 15.3 Open Questions

#### 15.3.1 Multi-User Expansion

**Question**
- Will AshTrail ever support multiple human users sharing data or collaborating?

**Potential Impact**
- Authentication model would need to expand beyond account switching
- Permissions, ownership, and access control would be required
- Sync and conflict resolution logic would become significantly more complex
- Aggregation and analytics would need user-scoping

**Open Considerations**
- Is multi-user a hard requirement or an optional future tier?
- Would shared data be read-only, write-only, or fully collaborative?
- Would users share devices or operate independently?

---

#### 15.3.2 Server-Side Aggregation

**Question**
- Should aggregation and analytics eventually move partially or fully to the server?

**Potential Impact**
- Reduced client computation and battery usage
- More consistent cross-device analytics
- Increased backend complexity and cost
- Requires trust in server-side correctness

**Open Considerations**
- Are aggregations needed across devices or accounts?
- Is historical recomputation required if logic changes?
- Should the server be authoritative for derived data, or only raw logs?

---

### 15.4 Notes

- These assumptions are not guarantees; violating them may cause undefined behavior.
- Any future feature work should explicitly confirm whether these assumptions still hold.
- If an assumption becomes invalid, this section must be updated before implementation proceeds.

---
