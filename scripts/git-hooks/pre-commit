#!/bin/bash
# Pre-commit hook for Flutter project
# Matches GitHub Actions workflow: pub get -> test -> analyze

set -e  # Exit on any error

echo "ğŸ” Running pre-commit checks..."

# Install dependencies (matches CI workflow)
echo "ğŸ“¦ Running flutter pub get..."
if ! flutter pub get; then
    echo "âŒ Flutter pub get failed."
    exit 1
fi

# Run Flutter tests (matches CI workflow order)
echo "ğŸ§ª Running flutter test..."
if ! flutter test; then
    echo "âŒ Flutter tests failed. Please fix the tests before committing."
    exit 1
fi

# Run Flutter analyze
echo "ğŸ“Š Running flutter analyze..."
if ! flutter analyze; then
    echo "âŒ Flutter analyze failed. Please fix the issues before committing."
    exit 1
fi

echo "âœ… All pre-commit checks passed!"
exit 0
